{"ast":null,"code":"var _jsxFileName = \"D:\\\\Work\\\\websheets\\\\src\\\\components\\\\Custom\\\\FileUpload\\\\FileUpload.jsx\",\n    _s = $RefreshSig$();\n\nimport { Widget } from \"@uploadcare/react-widget\";\nimport { useDispatch } from \"react-redux\";\nimport { setMessage } from \"../../../redux/settings/settingsActions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst FileUpload = _ref => {\n  _s();\n\n  let { ...other\n  } = _ref;\n  const dispatch = useDispatch();\n  const errors = {\n    errors: {\n      filesize: \"Вес изображения слишком большой\",\n      type: \"Неверный тип файла\"\n    },\n    dialog: {\n      tabs: {\n        preview: {\n          error: {\n            filesize: {\n              text: \"Вес изображения слишком большой\"\n            },\n            type: {\n              text: \"Неверный тип файла\"\n            }\n          }\n        }\n      }\n    }\n  };\n\n  const fileTypeLimit = allowedFileTypes => {\n    const types = allowedFileTypes.split(\" \");\n    return function (fileInfo) {\n      if (fileInfo.name === null) {\n        return;\n      }\n\n      const extension = fileInfo.name.split(\".\").pop();\n\n      if (extension && !types.includes(extension)) {\n        dispatch(setMessage(\"FORBIDDEN_TYPE\"));\n        throw new Error(\"type\");\n      }\n    };\n  };\n\n  const fileSizeLimit = maxSize => {\n    return function (fileInfo) {\n      if (fileInfo.name === null) {\n        return;\n      }\n\n      if (fileInfo.size && fileInfo.size > maxSize) {\n        dispatch(setMessage(\"LIMIT_FILE_SIZE\"));\n        throw new Error(\"filesize\");\n      }\n    };\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Widget, {\n      publicKey: \"73fb322ae944f810ceb2\",\n      locale: \"ru\",\n      validators: [fileTypeLimit(\"jpeg png jpg\"), fileSizeLimit(1000000)],\n      tabs: \"file url\",\n      localeTranslations: errors,\n      ...other\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(FileUpload, \"rgTLoBID190wEKCp9+G8W6F7A5M=\", false, function () {\n  return [useDispatch];\n});\n\n_c = FileUpload;\nexport default FileUpload;\n\nvar _c;\n\n$RefreshReg$(_c, \"FileUpload\");","map":{"version":3,"sources":["D:/Work/websheets/src/components/Custom/FileUpload/FileUpload.jsx"],"names":["Widget","useDispatch","setMessage","FileUpload","other","dispatch","errors","filesize","type","dialog","tabs","preview","error","text","fileTypeLimit","allowedFileTypes","types","split","fileInfo","name","extension","pop","includes","Error","fileSizeLimit","maxSize","size"],"mappings":";;;AAAA,SAASA,MAAT,QAAuB,0BAAvB;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,UAAT,QAA2B,yCAA3B;;;;AAEA,MAAMC,UAAU,GAAG,QAAkB;AAAA;;AAAA,MAAjB,EAAE,GAAGC;AAAL,GAAiB;AACnC,QAAMC,QAAQ,GAAGJ,WAAW,EAA5B;AACA,QAAMK,MAAM,GAAG;AACbA,IAAAA,MAAM,EAAE;AACNC,MAAAA,QAAQ,EAAE,iCADJ;AAENC,MAAAA,IAAI,EAAE;AAFA,KADK;AAKbC,IAAAA,MAAM,EAAE;AACNC,MAAAA,IAAI,EAAE;AACJC,QAAAA,OAAO,EAAE;AACPC,UAAAA,KAAK,EAAE;AACLL,YAAAA,QAAQ,EAAE;AACRM,cAAAA,IAAI,EAAE;AADE,aADL;AAILL,YAAAA,IAAI,EAAE;AACJK,cAAAA,IAAI,EAAE;AADF;AAJD;AADA;AADL;AADA;AALK,GAAf;;AAqBA,QAAMC,aAAa,GAAIC,gBAAD,IAAsB;AAC1C,UAAMC,KAAK,GAAGD,gBAAgB,CAACE,KAAjB,CAAuB,GAAvB,CAAd;AAEA,WAAO,UAAUC,QAAV,EAAoB;AACzB,UAAIA,QAAQ,CAACC,IAAT,KAAkB,IAAtB,EAA4B;AAC1B;AACD;;AACD,YAAMC,SAAS,GAAGF,QAAQ,CAACC,IAAT,CAAcF,KAAd,CAAoB,GAApB,EAAyBI,GAAzB,EAAlB;;AAEA,UAAID,SAAS,IAAI,CAACJ,KAAK,CAACM,QAAN,CAAeF,SAAf,CAAlB,EAA6C;AAC3Cf,QAAAA,QAAQ,CAACH,UAAU,CAAC,gBAAD,CAAX,CAAR;AACA,cAAM,IAAIqB,KAAJ,CAAU,MAAV,CAAN;AACD;AACF,KAVD;AAWD,GAdD;;AAgBA,QAAMC,aAAa,GAAIC,OAAD,IAAa;AACjC,WAAO,UAAUP,QAAV,EAAoB;AACzB,UAAIA,QAAQ,CAACC,IAAT,KAAkB,IAAtB,EAA4B;AAC1B;AACD;;AAED,UAAID,QAAQ,CAACQ,IAAT,IAAiBR,QAAQ,CAACQ,IAAT,GAAgBD,OAArC,EAA8C;AAC5CpB,QAAAA,QAAQ,CAACH,UAAU,CAAC,iBAAD,CAAX,CAAR;AACA,cAAM,IAAIqB,KAAJ,CAAU,UAAV,CAAN;AACD;AACF,KATD;AAUD,GAXD;;AAaA,sBACE;AAAA,2BACE,QAAC,MAAD;AACE,MAAA,SAAS,EAAC,sBADZ;AAEE,MAAA,MAAM,EAAC,IAFT;AAGE,MAAA,UAAU,EAAE,CAACT,aAAa,CAAC,cAAD,CAAd,EAAgCU,aAAa,CAAC,OAAD,CAA7C,CAHd;AAIE,MAAA,IAAI,EAAC,UAJP;AAKE,MAAA,kBAAkB,EAAElB,MALtB;AAAA,SAMMF;AANN;AAAA;AAAA;AAAA;AAAA;AADF,mBADF;AAYD,CAhED;;GAAMD,U;UACaF,W;;;KADbE,U;AAkEN,eAAeA,UAAf","sourcesContent":["import { Widget } from \"@uploadcare/react-widget\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { setMessage } from \"../../../redux/settings/settingsActions\";\r\n\r\nconst FileUpload = ({ ...other }) => {\r\n  const dispatch = useDispatch();\r\n  const errors = {\r\n    errors: {\r\n      filesize: \"Вес изображения слишком большой\",\r\n      type: \"Неверный тип файла\",\r\n    },\r\n    dialog: {\r\n      tabs: {\r\n        preview: {\r\n          error: {\r\n            filesize: {\r\n              text: \"Вес изображения слишком большой\",\r\n            },\r\n            type: {\r\n              text: \"Неверный тип файла\",\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n  };\r\n\r\n  const fileTypeLimit = (allowedFileTypes) => {\r\n    const types = allowedFileTypes.split(\" \");\r\n\r\n    return function (fileInfo) {\r\n      if (fileInfo.name === null) {\r\n        return;\r\n      }\r\n      const extension = fileInfo.name.split(\".\").pop();\r\n\r\n      if (extension && !types.includes(extension)) {\r\n        dispatch(setMessage(\"FORBIDDEN_TYPE\"));\r\n        throw new Error(\"type\");\r\n      }\r\n    };\r\n  };\r\n\r\n  const fileSizeLimit = (maxSize) => {\r\n    return function (fileInfo) {\r\n      if (fileInfo.name === null) {\r\n        return;\r\n      }\r\n\r\n      if (fileInfo.size && fileInfo.size > maxSize) {\r\n        dispatch(setMessage(\"LIMIT_FILE_SIZE\"));\r\n        throw new Error(\"filesize\");\r\n      }\r\n    };\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Widget\r\n        publicKey=\"73fb322ae944f810ceb2\"\r\n        locale=\"ru\"\r\n        validators={[fileTypeLimit(\"jpeg png jpg\"), fileSizeLimit(1000000)]}\r\n        tabs=\"file url\"\r\n        localeTranslations={errors}\r\n        {...other}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default FileUpload;\r\n"]},"metadata":{},"sourceType":"module"}