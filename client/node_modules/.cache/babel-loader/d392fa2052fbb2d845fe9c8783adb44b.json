{"ast":null,"code":"import _objectSpread from\"D:\\\\Work\\\\Projects\\\\web_sheet_node_server\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _slicedToArray from\"D:\\\\Work\\\\Projects\\\\web_sheet_node_server\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import{useEffect,useState}from\"react\";import FormInput from\"../../../Custom/FormInput/FormInput\";import FileUpload from\"../../../Custom/FileUpload/FileUpload\";import css from\"./FormHeader.module.css\";import{useFormContext}from\"react-hook-form\";import{domain}from\"../../../../config\";import{useDispatch}from\"react-redux\";import{useCallback}from\"react\";import{setMessage}from\"../../../../redux/settings/settingsActions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FormHeader=function FormHeader(_ref){var img=_ref.img,oldPreview=_ref.oldPreview,onFileUpload=_ref.onFileUpload;var _useFormContext=useFormContext(),register=_useFormContext.register;var _useState=useState(),_useState2=_slicedToArray(_useState,2),preview=_useState2[0],setPreview=_useState2[1];var dispatch=useDispatch();var onDialogClose=useCallback(function(){dispatch(setMessage(\"\"));},[dispatch]);useEffect(function(){if(img||oldPreview){setPreview(\"url('https://ucarecdn.com/\".concat(img||oldPreview,\"')\"));return;}setPreview(\"url(\\\"\".concat(domain,\"/static/RecipesImages/default.png\\\")\"));},[img,oldPreview]);return/*#__PURE__*/_jsxs(\"div\",{className:css.formHeader,children:[/*#__PURE__*/_jsx(\"div\",{className:css.imgSection,children:/*#__PURE__*/_jsx(\"div\",{className:css.img,style:{backgroundImage:preview}})}),/*#__PURE__*/_jsxs(\"div\",{className:css.mainFields,children:[/*#__PURE__*/_jsx(FormInput,{name:\"name\",label:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"div\",{className:css.typeContainer,children:/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({className:css.type},register(\"type\")),{},{children:[/*#__PURE__*/_jsx(\"option\",{value:\"\\u0425\\u041E\\u041B\\u041E\\u0414\\u041D\\u042B\\u0419 \\u041D\\u0410\\u041F\\u0418\\u0422\\u041E\\u041A\",defaultValue:true,children:\"\\u0425\\u043E\\u043B\\u043E\\u0434\\u043D\\u044B\\u0439 \\u043D\\u0430\\u043F\\u0438\\u0442\\u043E\\u043A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0427\\u0410\\u0419\",children:\"\\u0427\\u0430\\u0439\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0414\\u0415\\u0421\\u0415\\u0420\\u0422\",children:\"\\u0414\\u0435\\u0441\\u0435\\u0440\\u0442\"})]}))}),/*#__PURE__*/_jsx(FileUpload,{crop:\"3:4\",onChange:onFileUpload,onDialogClose:onDialogClose})]})]});};export default FormHeader;","map":{"version":3,"sources":["D:/Work/Projects/web_sheet_node_server/client/src/components/Recipes/AddRecipeForm/FormHeader/FormHeader.jsx"],"names":["useEffect","useState","FormInput","FileUpload","css","useFormContext","domain","useDispatch","useCallback","setMessage","FormHeader","img","oldPreview","onFileUpload","register","preview","setPreview","dispatch","onDialogClose","formHeader","imgSection","backgroundImage","mainFields","typeContainer","type"],"mappings":"yRAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,MAAOC,CAAAA,SAAP,KAAsB,qCAAtB,CACA,MAAOC,CAAAA,UAAP,KAAuB,uCAAvB,CACA,MAAOC,CAAAA,GAAP,KAAgB,yBAAhB,CACA,OAASC,cAAT,KAA+B,iBAA/B,CACA,OAASC,MAAT,KAAuB,oBAAvB,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,WAAT,KAA4B,OAA5B,CACA,OAASC,UAAT,KAA2B,4CAA3B,C,wFAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,MAAuC,IAApCC,CAAAA,GAAoC,MAApCA,GAAoC,CAA/BC,UAA+B,MAA/BA,UAA+B,CAAnBC,YAAmB,MAAnBA,YAAmB,CACxD,oBAAqBR,cAAc,EAAnC,CAAQS,QAAR,iBAAQA,QAAR,CACA,cAA8Bb,QAAQ,EAAtC,wCAAOc,OAAP,eAAgBC,UAAhB,eACA,GAAMC,CAAAA,QAAQ,CAAGV,WAAW,EAA5B,CAEA,GAAMW,CAAAA,aAAa,CAAGV,WAAW,CAAC,UAAM,CACtCS,QAAQ,CAACR,UAAU,CAAC,EAAD,CAAX,CAAR,CACD,CAFgC,CAE9B,CAACQ,QAAD,CAF8B,CAAjC,CAIAjB,SAAS,CAAC,UAAM,CACd,GAAIW,GAAG,EAAIC,UAAX,CAAuB,CACrBI,UAAU,qCAA8BL,GAAG,EAAIC,UAArC,OAAV,CACA,OACD,CAEDI,UAAU,iBAASV,MAAT,yCAAV,CACD,CAPQ,CAON,CAACK,GAAD,CAAMC,UAAN,CAPM,CAAT,CASA,mBACE,aAAK,SAAS,CAAER,GAAG,CAACe,UAApB,wBACE,YAAK,SAAS,CAAEf,GAAG,CAACgB,UAApB,uBACE,YACE,SAAS,CAAEhB,GAAG,CAACO,GADjB,CAEE,KAAK,CAAE,CACLU,eAAe,CAAEN,OADZ,CAFT,EADF,EADF,cASE,aAAK,SAAS,CAAEX,GAAG,CAACkB,UAApB,wBACE,KAAC,SAAD,EAAW,IAAI,CAAC,MAAhB,CAAuB,KAAK,CAAC,kDAA7B,EADF,cAEE,YAAK,SAAS,CAAElB,GAAG,CAACmB,aAApB,uBACE,4CAAQ,SAAS,CAAEnB,GAAG,CAACoB,IAAvB,EAAiCV,QAAQ,CAAC,MAAD,CAAzC,6BACE,eAAQ,KAAK,CAAC,6FAAd,CAAiC,YAAY,KAA7C,yGADF,cAIE,eAAQ,KAAK,CAAC,oBAAd,gCAJF,cAKE,eAAQ,KAAK,CAAC,sCAAd,kDALF,IADF,EAFF,cAYE,KAAC,UAAD,EACE,IAAI,CAAC,KADP,CAEE,QAAQ,CAAED,YAFZ,CAGE,aAAa,CAAEK,aAHjB,EAZF,GATF,GADF,CA8BD,CAhDD,CAkDA,cAAeR,CAAAA,UAAf","sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport FormInput from \"../../../Custom/FormInput/FormInput\";\r\nimport FileUpload from \"../../../Custom/FileUpload/FileUpload\";\r\nimport css from \"./FormHeader.module.css\";\r\nimport { useFormContext } from \"react-hook-form\";\r\nimport { domain } from \"../../../../config\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useCallback } from \"react\";\r\nimport { setMessage } from \"../../../../redux/settings/settingsActions\";\r\n\r\nconst FormHeader = ({ img, oldPreview, onFileUpload }) => {\r\n  const { register } = useFormContext();\r\n  const [preview, setPreview] = useState();\r\n  const dispatch = useDispatch();\r\n\r\n  const onDialogClose = useCallback(() => {\r\n    dispatch(setMessage(\"\"));\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (img || oldPreview) {\r\n      setPreview(`url('https://ucarecdn.com/${img || oldPreview}')`);\r\n      return;\r\n    }\r\n\r\n    setPreview(`url(\"${domain}/static/RecipesImages/default.png\")`);\r\n  }, [img, oldPreview]);\r\n\r\n  return (\r\n    <div className={css.formHeader}>\r\n      <div className={css.imgSection}>\r\n        <div\r\n          className={css.img}\r\n          style={{\r\n            backgroundImage: preview,\r\n          }}\r\n        ></div>\r\n      </div>\r\n      <div className={css.mainFields}>\r\n        <FormInput name=\"name\" label=\"Название\" />\r\n        <div className={css.typeContainer}>\r\n          <select className={css.type} {...register(\"type\")}>\r\n            <option value=\"ХОЛОДНЫЙ НАПИТОК\" defaultValue>\r\n              Холодный напиток\r\n            </option>\r\n            <option value=\"ЧАЙ\">Чай</option>\r\n            <option value=\"ДЕСЕРТ\">Десерт</option>\r\n          </select>\r\n        </div>\r\n\r\n        <FileUpload\r\n          crop=\"3:4\"\r\n          onChange={onFileUpload}\r\n          onDialogClose={onDialogClose}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FormHeader;\r\n"]},"metadata":{},"sourceType":"module"}