{"ast":null,"code":"import _asyncToGenerator from\"D:\\\\Work\\\\Projects\\\\web_sheet_node_server\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _regeneratorRuntime from\"D:\\\\Work\\\\Projects\\\\web_sheet_node_server\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import axios from\"axios\";import{domain}from\"../../config\";import{CHECK,LOGIN,LOGOUT}from\"../types\";axios.defaults.auth=true;axios.defaults.withCredentials=true;export function login(userId){return{type:LOGIN,payload:userId};}export function logout(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var _yield$axios,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios({method:\"get\",url:\"\".concat(domain,\"/auth/logout\")});case 3:_yield$axios=_context.sent;data=_yield$axios.data;if(data.success){dispatch({type:LOGOUT});}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(\"Logout error\",_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function(_x){return _ref.apply(this,arguments);};}();}export function check(){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var _yield$axios2,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios({method:\"get\",url:\"\".concat(domain,\"/auth/check\"),withCredentials:true});case 3:_yield$axios2=_context2.sent;data=_yield$axios2.data;if(data.success){dispatch({type:CHECK,payload:{isAuth:true,userId:data.decodedData.id}});}_context2.next=12;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);dispatch({type:CHECK,payload:{isAuth:false,userId:null}});console.log(\"Check error\",_context2.t0);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();}","map":{"version":3,"sources":["D:/Work/Projects/web_sheet_node_server/client/src/redux/app/appActions.js"],"names":["axios","domain","CHECK","LOGIN","LOGOUT","defaults","auth","withCredentials","login","userId","type","payload","logout","dispatch","method","url","data","success","console","log","check","isAuth","decodedData","id"],"mappings":"4RAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,MAAT,KAAuB,cAAvB,CACA,OAASC,KAAT,CAAgBC,KAAhB,CAAuBC,MAAvB,KAAqC,UAArC,CACAJ,KAAK,CAACK,QAAN,CAAeC,IAAf,CAAsB,IAAtB,CACAN,KAAK,CAACK,QAAN,CAAeE,eAAf,CAAiC,IAAjC,CAEA,MAAO,SAASC,CAAAA,KAAT,CAAeC,MAAf,CAAuB,CAC5B,MAAO,CACLC,IAAI,CAAEP,KADD,CAELQ,OAAO,CAAEF,MAFJ,CAAP,CAID,CAED,MAAO,SAASG,CAAAA,MAAT,EAAkB,CACvB,+FAAO,iBAAOC,QAAP,8KAEoBb,CAAAA,KAAK,CAAC,CAC3Bc,MAAM,CAAE,KADmB,CAE3BC,GAAG,WAAKd,MAAL,gBAFwB,CAAD,CAFzB,mCAEKe,IAFL,cAEKA,IAFL,CAMH,GAAIA,IAAI,CAACC,OAAT,CAAkB,CAChBJ,QAAQ,CAAC,CACPH,IAAI,CAAEN,MADC,CAAD,CAAR,CAGD,CAVE,+EAYHc,OAAO,CAACC,GAAR,CAAY,cAAZ,cAZG,oEAAP,+DAeD,CAED,MAAO,SAASC,CAAAA,KAAT,EAAiB,CACtB,gGAAO,kBAAOP,QAAP,qLAEoBb,CAAAA,KAAK,CAAC,CAC3Bc,MAAM,CAAE,KADmB,CAE3BC,GAAG,WAAKd,MAAL,eAFwB,CAG3BM,eAAe,CAAE,IAHU,CAAD,CAFzB,qCAEKS,IAFL,eAEKA,IAFL,CAOH,GAAIA,IAAI,CAACC,OAAT,CAAkB,CAChBJ,QAAQ,CAAC,CACPH,IAAI,CAAER,KADC,CAEPS,OAAO,CAAE,CACPU,MAAM,CAAE,IADD,CAEPZ,MAAM,CAAEO,IAAI,CAACM,WAAL,CAAiBC,EAFlB,CAFF,CAAD,CAAR,CAOD,CAfE,mFAiBHV,QAAQ,CAAC,CACPH,IAAI,CAAER,KADC,CAEPS,OAAO,CAAE,CACPU,MAAM,CAAE,KADD,CAEPZ,MAAM,CAAE,IAFD,CAFF,CAAD,CAAR,CAOAS,OAAO,CAACC,GAAR,CAAY,aAAZ,eAxBG,sEAAP,iEA2BD","sourcesContent":["import axios from \"axios\";\r\nimport { domain } from \"../../config\";\r\nimport { CHECK, LOGIN, LOGOUT } from \"../types\";\r\naxios.defaults.auth = true;\r\naxios.defaults.withCredentials = true;\r\n\r\nexport function login(userId) {\r\n  return {\r\n    type: LOGIN,\r\n    payload: userId,\r\n  };\r\n}\r\n\r\nexport function logout() {\r\n  return async (dispatch) => {\r\n    try {\r\n      const { data } = await axios({\r\n        method: \"get\",\r\n        url: `${domain}/auth/logout`,\r\n      });\r\n      if (data.success) {\r\n        dispatch({\r\n          type: LOGOUT,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.log(\"Logout error\", error);\r\n    }\r\n  };\r\n}\r\n\r\nexport function check() {\r\n  return async (dispatch) => {\r\n    try {\r\n      const { data } = await axios({\r\n        method: \"get\",\r\n        url: `${domain}/auth/check`,\r\n        withCredentials: true,\r\n      });\r\n      if (data.success) {\r\n        dispatch({\r\n          type: CHECK,\r\n          payload: {\r\n            isAuth: true,\r\n            userId: data.decodedData.id,\r\n          },\r\n        });\r\n      }\r\n    } catch (error) {\r\n      dispatch({\r\n        type: CHECK,\r\n        payload: {\r\n          isAuth: false,\r\n          userId: null,\r\n        },\r\n      });\r\n      console.log(\"Check error\", error);\r\n    }\r\n  };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}