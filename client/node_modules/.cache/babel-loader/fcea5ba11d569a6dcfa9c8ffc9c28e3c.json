{"ast":null,"code":"import _objectSpread from\"D:\\\\Work\\\\Projects\\\\web_sheet_node_server\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _asyncToGenerator from\"D:\\\\Work\\\\Projects\\\\web_sheet_node_server\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _regeneratorRuntime from\"D:\\\\Work\\\\Projects\\\\web_sheet_node_server\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{UPDATE_TARGET_DATE,LOAD_SIDE_PERSONS,LOAD_MAIN_DATE,SHOW_WORKSHIFT,NEXT_SIDE_PAGE,UPDATE_SEARCH_PERSON,SWITCH_ON_LOADING,SWITCH_OFF_LOADING}from\"../types\";import axios from\"axios\";import{domain}from\"../../config\";export function updateTargetDate(newTargetDate){return{type:UPDATE_TARGET_DATE,payload:newTargetDate};}export function loadSidePersons(date){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:SWITCH_ON_LOADING});axios.get(\"\".concat(domain,\"/api/get_side_persons\"),{params:{date:date}}).then(function(response){dispatch({type:LOAD_SIDE_PERSONS,payload:response.data.persons});dispatch({type:SWITCH_OFF_LOADING});}).catch(function(error){console.log(error);dispatch({type:SWITCH_OFF_LOADING});});case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();}export function loadMainDate(personId){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:SWITCH_ON_LOADING});axios.get(\"\".concat(domain,\"/api/get_person\"),{params:{personId:personId}}).then(function(response){var _response$data=response.data,name=_response$data.name,workShifts=_response$data.workShifts;workShifts.sort(function(a,b){var d1=new Date(a.date);var d2=new Date(b.date);return d1-d2;});var wsParseDate=workShifts.map(function(item){return _objectSpread(_objectSpread({},item),{},{date:new Date(item.date)});});dispatch({type:LOAD_MAIN_DATE,workShifts:wsParseDate,personName:name});dispatch({type:SWITCH_OFF_LOADING});}).catch(function(error){console.log(error);dispatch({type:SWITCH_OFF_LOADING});});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();}export function showWorkshift(){var workshift=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"Нет\";return{type:SHOW_WORKSHIFT,payload:workshift};}export function nextSidePage(prev){if(prev===\"reset\"){return{type:NEXT_SIDE_PAGE,payload:0};}return{type:NEXT_SIDE_PAGE,payload:prev+1};}export function updateSearchPerson(searcherValue){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch({type:SWITCH_ON_LOADING});axios.get(\"\".concat(domain,\"/api/livesearch\"),{params:{search:searcherValue}}).then(function(response){var persons=response.data.persons;dispatch({type:UPDATE_SEARCH_PERSON,payload:persons});dispatch({type:SWITCH_OFF_LOADING});}).catch(function(error){console.log(error);dispatch({type:SWITCH_OFF_LOADING});});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();}","map":{"version":3,"sources":["D:/Work/Projects/web_sheet_node_server/client/src/redux/calendar/calendarActions.js"],"names":["UPDATE_TARGET_DATE","LOAD_SIDE_PERSONS","LOAD_MAIN_DATE","SHOW_WORKSHIFT","NEXT_SIDE_PAGE","UPDATE_SEARCH_PERSON","SWITCH_ON_LOADING","SWITCH_OFF_LOADING","axios","domain","updateTargetDate","newTargetDate","type","payload","loadSidePersons","date","dispatch","get","params","then","response","data","persons","catch","error","console","log","loadMainDate","personId","name","workShifts","sort","a","b","d1","Date","d2","wsParseDate","map","item","personName","showWorkshift","workshift","nextSidePage","prev","updateSearchPerson","searcherValue","search"],"mappings":"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","sourcesContent":["import {\r\n  UPDATE_TARGET_DATE,\r\n  LOAD_SIDE_PERSONS,\r\n  LOAD_MAIN_DATE,\r\n  SHOW_WORKSHIFT,\r\n  NEXT_SIDE_PAGE,\r\n  UPDATE_SEARCH_PERSON,\r\n  SWITCH_ON_LOADING,\r\n  SWITCH_OFF_LOADING,\r\n} from \"../types\";\r\nimport axios from \"axios\";\r\nimport { domain } from \"../../config\";\r\n\r\nexport function updateTargetDate(newTargetDate) {\r\n  return {\r\n    type: UPDATE_TARGET_DATE,\r\n    payload: newTargetDate,\r\n  };\r\n}\r\n\r\nexport function loadSidePersons(date) {\r\n  return async (dispatch) => {\r\n    dispatch({\r\n      type: SWITCH_ON_LOADING,\r\n    });\r\n    axios\r\n      .get(`${domain}/api/get_side_persons`, {\r\n        params: { date: date },\r\n      })\r\n      .then((response) => {\r\n        dispatch({\r\n          type: LOAD_SIDE_PERSONS,\r\n          payload: response.data.persons,\r\n        });\r\n        dispatch({\r\n          type: SWITCH_OFF_LOADING,\r\n        });\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n        dispatch({\r\n          type: SWITCH_OFF_LOADING,\r\n        });\r\n      });\r\n  };\r\n}\r\n\r\nexport function loadMainDate(personId) {\r\n  return async (dispatch) => {\r\n    dispatch({\r\n      type: SWITCH_ON_LOADING,\r\n    });\r\n    axios\r\n      .get(`${domain}/api/get_person`, {\r\n        params: { personId },\r\n      })\r\n      .then((response) => {\r\n        const { name, workShifts } = response.data;\r\n        workShifts.sort((a, b) => {\r\n          const d1 = new Date(a.date);\r\n          const d2 = new Date(b.date);\r\n          return d1 - d2;\r\n        });\r\n        const wsParseDate = workShifts.map((item) => {\r\n          return { ...item, date: new Date(item.date) };\r\n        });\r\n\r\n        dispatch({\r\n          type: LOAD_MAIN_DATE,\r\n          workShifts: wsParseDate,\r\n          personName: name,\r\n        });\r\n        dispatch({\r\n          type: SWITCH_OFF_LOADING,\r\n        });\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n        dispatch({\r\n          type: SWITCH_OFF_LOADING,\r\n        });\r\n      });\r\n  };\r\n}\r\n\r\nexport function showWorkshift(workshift = \"Нет\") {\r\n  return {\r\n    type: SHOW_WORKSHIFT,\r\n    payload: workshift,\r\n  };\r\n}\r\n\r\nexport function nextSidePage(prev) {\r\n  if (prev === \"reset\") {\r\n    return {\r\n      type: NEXT_SIDE_PAGE,\r\n      payload: 0,\r\n    };\r\n  }\r\n  return {\r\n    type: NEXT_SIDE_PAGE,\r\n    payload: prev + 1,\r\n  };\r\n}\r\n\r\nexport function updateSearchPerson(searcherValue) {\r\n  return async (dispatch) => {\r\n    dispatch({\r\n      type: SWITCH_ON_LOADING,\r\n    });\r\n    axios\r\n      .get(`${domain}/api/livesearch`, {\r\n        params: { search: searcherValue },\r\n      })\r\n      .then((response) => {\r\n        const { persons } = response.data;\r\n        dispatch({\r\n          type: UPDATE_SEARCH_PERSON,\r\n          payload: persons,\r\n        });\r\n        dispatch({\r\n          type: SWITCH_OFF_LOADING,\r\n        });\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n        dispatch({\r\n          type: SWITCH_OFF_LOADING,\r\n        });\r\n      });\r\n  };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}