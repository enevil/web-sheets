{"ast":null,"code":"import { c as _objectSpread2, b as _slicedToArray } from './index-ded791f3.js';\nimport React, { useReducer, useRef, useEffect } from 'react';\nimport uploadcare from 'uploadcare-widget';\nimport { a as useDeepEffect, u as useCustomTabs } from './use-deep-effect-393663e2.js';\nimport 'react-fast-compare';\nimport '@uploadcare/client-suspense';\n\nvar merge = function merge(state, newState) {\n  return _objectSpread2(_objectSpread2({}, state), newState);\n};\n\nvar useState = function useState(initial) {\n  return useReducer(merge, initial || {});\n};\n\nvar containerStyles = {\n  height: '500px',\n  display: 'flex',\n  flexDirection: 'column',\n  alignItems: 'center',\n  justifyContent: 'center'\n};\n\nvar Progress = function Progress(_ref) {\n  var hidden = _ref.hidden,\n      value = _ref.value;\n  var ref = useRef(null);\n  var renderer = useRef(null);\n  useEffect(function () {\n    renderer.current = new uploadcare.Circle(ref.current).renderer;\n  }, []);\n  useEffect(function () {\n    renderer.current.setValue(value);\n  }, [value]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    hidden: hidden,\n    ref: ref\n  });\n};\n\nvar useDialog = function useDialog(props, uploadcare) {\n  var _useState = useState({\n    opened: true,\n    file: null,\n    progress: null\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var customTabs = props.customTabs,\n      tabsCss = props.tabsCss,\n      locale = props.locale,\n      localePluralize = props.localePluralize,\n      localeTranslations = props.localeTranslations;\n  useDeepEffect(function () {\n    if (locale) window.UPLOADCARE_LOCALE = locale;\n    if (localePluralize) window.UPLOADCARE_LOCALE_PLURALIZE = localePluralize;\n\n    if (localeTranslations) {\n      window.UPLOADCARE_LOCALE_TRANSLATIONS = localeTranslations;\n    }\n\n    return function () {\n      if (locale) delete window.UPLOADCARE_LOCALE;\n      if (localePluralize) delete window.UPLOADCARE_LOCALE_PLURALIZE;\n      if (localeTranslations) delete window.UPLOADCARE_LOCALE_TRANSLATIONS;\n    };\n  }, [locale, localePluralize, localeTranslations]);\n  useCustomTabs(customTabs, uploadcare);\n  var panelContainer = useRef(null);\n  var panelInstance = useRef(null);\n  useEffect(function () {\n    if (state.opened) {\n      if (uploadcare && tabsCss && typeof tabsCss === 'string') {\n        if (tabsCss.indexOf('https://') === 0) {\n          uploadcare.tabsCss.addUrl(tabsCss);\n        } else {\n          uploadcare.tabsCss.addStyle(tabsCss);\n        }\n      }\n\n      panelInstance.current && panelInstance.current.reject();\n      panelInstance.current = uploadcare.openPanel(panelContainer.current, state.file ? uploadcare.fileFrom('uploaded', state.file.uuid, props) : null, props);\n      setState({\n        file: null\n      });\n      panelInstance.current.done(function (file) {\n        setState({\n          opened: false\n        });\n        file.progress(function (state) {\n          return setState({\n            progress: state.progress\n          });\n        });\n        file.done(function (file) {\n          return setState({\n            file: file\n          });\n        });\n      });\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [uploadcare, props, setState, state.opened]);\n  useEffect(function () {\n    return function () {\n      return panelInstance.current && panelInstance.current.reject();\n    };\n  }, []);\n  return [state, setState, panelContainer];\n};\n\nvar Dialog = function Dialog(props) {\n  var _useDialog = useDialog(props, uploadcare),\n      _useDialog2 = _slicedToArray(_useDialog, 3),\n      _useDialog2$ = _useDialog2[0],\n      opened = _useDialog2$.opened,\n      file = _useDialog2$.file,\n      progress = _useDialog2$.progress,\n      setState = _useDialog2[1],\n      containerRef = _useDialog2[2];\n\n  var readyState = file && !opened;\n  var progressState = !file && !opened && progress !== null;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: props.id,\n    style: containerStyles\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    ref: containerRef\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    hidden: !readyState\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"uploadcare--button uploadcare--button_primary\",\n    onClick: function onClick() {\n      return setState({\n        opened: true,\n        sourse: 'natural'\n      });\n    }\n  }, \"Open panel\")), /*#__PURE__*/React.createElement(\"span\", {\n    hidden: !readyState\n  }, \"File uuid: \"), /*#__PURE__*/React.createElement(\"span\", {\n    hidden: !readyState\n  }, file && file.uuid), /*#__PURE__*/React.createElement(Progress, {\n    hidden: !progressState,\n    value: progress\n  }));\n};\n\nexport default Dialog;","map":{"version":3,"sources":["D:/Work/Projects/web_sheet_node_server/client/node_modules/@uploadcare/react-widget/dist/esm/dialog-98ec5e8a.js"],"names":["c","_objectSpread2","b","_slicedToArray","React","useReducer","useRef","useEffect","uploadcare","a","useDeepEffect","u","useCustomTabs","merge","state","newState","useState","initial","containerStyles","height","display","flexDirection","alignItems","justifyContent","Progress","_ref","hidden","value","ref","renderer","current","Circle","setValue","createElement","useDialog","props","_useState","opened","file","progress","_useState2","setState","customTabs","tabsCss","locale","localePluralize","localeTranslations","window","UPLOADCARE_LOCALE","UPLOADCARE_LOCALE_PLURALIZE","UPLOADCARE_LOCALE_TRANSLATIONS","panelContainer","panelInstance","indexOf","addUrl","addStyle","reject","openPanel","fileFrom","uuid","done","Dialog","_useDialog","_useDialog2","_useDialog2$","containerRef","readyState","progressState","id","style","className","onClick","sourse"],"mappings":"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","sourcesContent":["import { c as _objectSpread2, b as _slicedToArray } from './index-ded791f3.js';\nimport React, { useReducer, useRef, useEffect } from 'react';\nimport uploadcare from 'uploadcare-widget';\nimport { a as useDeepEffect, u as useCustomTabs } from './use-deep-effect-393663e2.js';\nimport 'react-fast-compare';\nimport '@uploadcare/client-suspense';\n\nvar merge = function merge(state, newState) {\n  return _objectSpread2(_objectSpread2({}, state), newState);\n};\n\nvar useState = function useState(initial) {\n  return useReducer(merge, initial || {});\n};\n\nvar containerStyles = {\n  height: '500px',\n  display: 'flex',\n  flexDirection: 'column',\n  alignItems: 'center',\n  justifyContent: 'center'\n};\n\nvar Progress = function Progress(_ref) {\n  var hidden = _ref.hidden,\n      value = _ref.value;\n  var ref = useRef(null);\n  var renderer = useRef(null);\n  useEffect(function () {\n    renderer.current = new uploadcare.Circle(ref.current).renderer;\n  }, []);\n  useEffect(function () {\n    renderer.current.setValue(value);\n  }, [value]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    hidden: hidden,\n    ref: ref\n  });\n};\n\nvar useDialog = function useDialog(props, uploadcare) {\n  var _useState = useState({\n    opened: true,\n    file: null,\n    progress: null\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var customTabs = props.customTabs,\n      tabsCss = props.tabsCss,\n      locale = props.locale,\n      localePluralize = props.localePluralize,\n      localeTranslations = props.localeTranslations;\n  useDeepEffect(function () {\n    if (locale) window.UPLOADCARE_LOCALE = locale;\n    if (localePluralize) window.UPLOADCARE_LOCALE_PLURALIZE = localePluralize;\n\n    if (localeTranslations) {\n      window.UPLOADCARE_LOCALE_TRANSLATIONS = localeTranslations;\n    }\n\n    return function () {\n      if (locale) delete window.UPLOADCARE_LOCALE;\n      if (localePluralize) delete window.UPLOADCARE_LOCALE_PLURALIZE;\n      if (localeTranslations) delete window.UPLOADCARE_LOCALE_TRANSLATIONS;\n    };\n  }, [locale, localePluralize, localeTranslations]);\n  useCustomTabs(customTabs, uploadcare);\n  var panelContainer = useRef(null);\n  var panelInstance = useRef(null);\n  useEffect(function () {\n    if (state.opened) {\n      if (uploadcare && tabsCss && typeof tabsCss === 'string') {\n        if (tabsCss.indexOf('https://') === 0) {\n          uploadcare.tabsCss.addUrl(tabsCss);\n        } else {\n          uploadcare.tabsCss.addStyle(tabsCss);\n        }\n      }\n\n      panelInstance.current && panelInstance.current.reject();\n      panelInstance.current = uploadcare.openPanel(panelContainer.current, state.file ? uploadcare.fileFrom('uploaded', state.file.uuid, props) : null, props);\n      setState({\n        file: null\n      });\n      panelInstance.current.done(function (file) {\n        setState({\n          opened: false\n        });\n        file.progress(function (state) {\n          return setState({\n            progress: state.progress\n          });\n        });\n        file.done(function (file) {\n          return setState({\n            file: file\n          });\n        });\n      });\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [uploadcare, props, setState, state.opened]);\n  useEffect(function () {\n    return function () {\n      return panelInstance.current && panelInstance.current.reject();\n    };\n  }, []);\n  return [state, setState, panelContainer];\n};\n\nvar Dialog = function Dialog(props) {\n  var _useDialog = useDialog(props, uploadcare),\n      _useDialog2 = _slicedToArray(_useDialog, 3),\n      _useDialog2$ = _useDialog2[0],\n      opened = _useDialog2$.opened,\n      file = _useDialog2$.file,\n      progress = _useDialog2$.progress,\n      setState = _useDialog2[1],\n      containerRef = _useDialog2[2];\n\n  var readyState = file && !opened;\n  var progressState = !file && !opened && progress !== null;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: props.id,\n    style: containerStyles\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    ref: containerRef\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    hidden: !readyState\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"uploadcare--button uploadcare--button_primary\",\n    onClick: function onClick() {\n      return setState({\n        opened: true,\n        sourse: 'natural'\n      });\n    }\n  }, \"Open panel\")), /*#__PURE__*/React.createElement(\"span\", {\n    hidden: !readyState\n  }, \"File uuid: \"), /*#__PURE__*/React.createElement(\"span\", {\n    hidden: !readyState\n  }, file && file.uuid), /*#__PURE__*/React.createElement(Progress, {\n    hidden: !progressState,\n    value: progress\n  }));\n};\n\nexport default Dialog;\n"]},"metadata":{},"sourceType":"module"}