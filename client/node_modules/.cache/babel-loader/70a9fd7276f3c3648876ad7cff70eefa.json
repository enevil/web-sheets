{"ast":null,"code":"import _objectSpread from\"D:\\\\Work\\\\Projects\\\\web_sheet_node_server\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import{Widget}from\"@uploadcare/react-widget\";import{useDispatch}from\"react-redux\";import{setMessage}from\"../../../redux/settings/settingsActions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var FileUpload=function FileUpload(_ref){var other=Object.assign({},_ref);var dispatch=useDispatch();var errors={errors:{filesize:\"Вес изображения слишком большой\",type:\"Неверный тип файла\"},dialog:{tabs:{preview:{error:{filesize:{text:\"Вес изображения слишком большой\"},type:{text:\"Неверный тип файла\"}}}}}};var fileTypeLimit=function fileTypeLimit(allowedFileTypes){var types=allowedFileTypes.split(\" \");return function(fileInfo){if(fileInfo.name===null){return;}var extension=fileInfo.name.split(\".\").pop();if(extension&&!types.includes(extension)){dispatch(setMessage(\"FORBIDDEN_TYPE\"));throw new Error(\"type\");}};};var fileSizeLimit=function fileSizeLimit(maxSize){return function(fileInfo){if(fileInfo.name===null){return;}if(fileInfo.size&&fileInfo.size>maxSize){dispatch(setMessage(\"LIMIT_FILE_SIZE\"));throw new Error(\"filesize\");}};};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Widget,_objectSpread({publicKey:\"73fb322ae944f810ceb2\",locale:\"ru\",validators:[fileTypeLimit(\"jpeg png jpg\"),fileSizeLimit(1000000)],tabs:\"file url\",localeTranslations:errors},other))});};export default FileUpload;","map":{"version":3,"sources":["D:/Work/Projects/web_sheet_node_server/client/src/components/Custom/FileUpload/FileUpload.jsx"],"names":["Widget","useDispatch","setMessage","FileUpload","other","dispatch","errors","filesize","type","dialog","tabs","preview","error","text","fileTypeLimit","allowedFileTypes","types","split","fileInfo","name","extension","pop","includes","Error","fileSizeLimit","maxSize","size"],"mappings":"4IAAA,OAASA,MAAT,KAAuB,0BAAvB,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,UAAT,KAA2B,yCAA3B,C,gGAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,MAAkB,IAAZC,CAAAA,KAAY,wBACnC,GAAMC,CAAAA,QAAQ,CAAGJ,WAAW,EAA5B,CACA,GAAMK,CAAAA,MAAM,CAAG,CACbA,MAAM,CAAE,CACNC,QAAQ,CAAE,iCADJ,CAENC,IAAI,CAAE,oBAFA,CADK,CAKbC,MAAM,CAAE,CACNC,IAAI,CAAE,CACJC,OAAO,CAAE,CACPC,KAAK,CAAE,CACLL,QAAQ,CAAE,CACRM,IAAI,CAAE,iCADE,CADL,CAILL,IAAI,CAAE,CACJK,IAAI,CAAE,oBADF,CAJD,CADA,CADL,CADA,CALK,CAAf,CAqBA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,gBAAD,CAAsB,CAC1C,GAAMC,CAAAA,KAAK,CAAGD,gBAAgB,CAACE,KAAjB,CAAuB,GAAvB,CAAd,CAEA,MAAO,UAAUC,QAAV,CAAoB,CACzB,GAAIA,QAAQ,CAACC,IAAT,GAAkB,IAAtB,CAA4B,CAC1B,OACD,CACD,GAAMC,CAAAA,SAAS,CAAGF,QAAQ,CAACC,IAAT,CAAcF,KAAd,CAAoB,GAApB,EAAyBI,GAAzB,EAAlB,CAEA,GAAID,SAAS,EAAI,CAACJ,KAAK,CAACM,QAAN,CAAeF,SAAf,CAAlB,CAA6C,CAC3Cf,QAAQ,CAACH,UAAU,CAAC,gBAAD,CAAX,CAAR,CACA,KAAM,IAAIqB,CAAAA,KAAJ,CAAU,MAAV,CAAN,CACD,CACF,CAVD,CAWD,CAdD,CAgBA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,OAAD,CAAa,CACjC,MAAO,UAAUP,QAAV,CAAoB,CACzB,GAAIA,QAAQ,CAACC,IAAT,GAAkB,IAAtB,CAA4B,CAC1B,OACD,CAED,GAAID,QAAQ,CAACQ,IAAT,EAAiBR,QAAQ,CAACQ,IAAT,CAAgBD,OAArC,CAA8C,CAC5CpB,QAAQ,CAACH,UAAU,CAAC,iBAAD,CAAX,CAAR,CACA,KAAM,IAAIqB,CAAAA,KAAJ,CAAU,UAAV,CAAN,CACD,CACF,CATD,CAUD,CAXD,CAaA,mBACE,sCACE,KAAC,MAAD,gBACE,SAAS,CAAC,sBADZ,CAEE,MAAM,CAAC,IAFT,CAGE,UAAU,CAAE,CAACT,aAAa,CAAC,cAAD,CAAd,CAAgCU,aAAa,CAAC,OAAD,CAA7C,CAHd,CAIE,IAAI,CAAC,UAJP,CAKE,kBAAkB,CAAElB,MALtB,EAMMF,KANN,EADF,EADF,CAYD,CAhED,CAkEA,cAAeD,CAAAA,UAAf","sourcesContent":["import { Widget } from \"@uploadcare/react-widget\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { setMessage } from \"../../../redux/settings/settingsActions\";\r\n\r\nconst FileUpload = ({ ...other }) => {\r\n  const dispatch = useDispatch();\r\n  const errors = {\r\n    errors: {\r\n      filesize: \"Вес изображения слишком большой\",\r\n      type: \"Неверный тип файла\",\r\n    },\r\n    dialog: {\r\n      tabs: {\r\n        preview: {\r\n          error: {\r\n            filesize: {\r\n              text: \"Вес изображения слишком большой\",\r\n            },\r\n            type: {\r\n              text: \"Неверный тип файла\",\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n  };\r\n\r\n  const fileTypeLimit = (allowedFileTypes) => {\r\n    const types = allowedFileTypes.split(\" \");\r\n\r\n    return function (fileInfo) {\r\n      if (fileInfo.name === null) {\r\n        return;\r\n      }\r\n      const extension = fileInfo.name.split(\".\").pop();\r\n\r\n      if (extension && !types.includes(extension)) {\r\n        dispatch(setMessage(\"FORBIDDEN_TYPE\"));\r\n        throw new Error(\"type\");\r\n      }\r\n    };\r\n  };\r\n\r\n  const fileSizeLimit = (maxSize) => {\r\n    return function (fileInfo) {\r\n      if (fileInfo.name === null) {\r\n        return;\r\n      }\r\n\r\n      if (fileInfo.size && fileInfo.size > maxSize) {\r\n        dispatch(setMessage(\"LIMIT_FILE_SIZE\"));\r\n        throw new Error(\"filesize\");\r\n      }\r\n    };\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Widget\r\n        publicKey=\"73fb322ae944f810ceb2\"\r\n        locale=\"ru\"\r\n        validators={[fileTypeLimit(\"jpeg png jpg\"), fileSizeLimit(1000000)]}\r\n        tabs=\"file url\"\r\n        localeTranslations={errors}\r\n        {...other}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default FileUpload;\r\n"]},"metadata":{},"sourceType":"module"}