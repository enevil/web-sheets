import{c as e,b as n}from"./index-099501c5.js";import r,{useReducer as t,useRef as l,useEffect as u}from"react";import o from"uploadcare-widget/uploadcare.lang.en.min";import{a as i,u as a}from"./use-deep-effect-67377cdd.js";import"react-fast-compare";import"@uploadcare/client-suspense";var c=function(n,r){return e(e({},n),r)},d={height:"500px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},s=function(e){var n=e.hidden,t=e.value,i=l(null),a=l(null);return u((function(){a.current=new o.Circle(i.current).renderer}),[]),u((function(){a.current.setValue(t)}),[t]),r.createElement("div",{hidden:n,ref:i})},p=function(e,r){var o=t(c,{opened:!0,file:null,progress:null}||{}),d=n(o,2),s=d[0],p=d[1],f=e.customTabs,m=e.tabsCss,A=e.locale,L=e.localePluralize,E=e.localeTranslations;i((function(){return A&&(window.UPLOADCARE_LOCALE=A),L&&(window.UPLOADCARE_LOCALE_PLURALIZE=L),E&&(window.UPLOADCARE_LOCALE_TRANSLATIONS=E),function(){A&&delete window.UPLOADCARE_LOCALE,L&&delete window.UPLOADCARE_LOCALE_PLURALIZE,E&&delete window.UPLOADCARE_LOCALE_TRANSLATIONS}}),[A,L,E]),a(f,r);var C=l(null),O=l(null);return u((function(){s.opened&&(r&&m&&"string"==typeof m&&(0===m.indexOf("https://")?r.tabsCss.addUrl(m):r.tabsCss.addStyle(m)),O.current&&O.current.reject(),O.current=r.openPanel(C.current,s.file?r.fileFrom("uploaded",s.file.uuid,e):null,e),p({file:null}),O.current.done((function(e){p({opened:!1}),e.progress((function(e){return p({progress:e.progress})})),e.done((function(e){return p({file:e})}))})))}),[r,e,p,s.opened]),u((function(){return function(){return O.current&&O.current.reject()}}),[]),[s,p,C]};export default function(e){var t=p(e,o),l=n(t,3),u=l[0],i=u.opened,a=u.file,c=u.progress,f=l[1],m=l[2],A=a&&!i,L=!a&&!i&&null!==c;return r.createElement("div",{id:e.id,style:d},r.createElement("div",{ref:m}),r.createElement("span",{hidden:!A},r.createElement("button",{className:"uploadcare--button uploadcare--button_primary",onClick:function(){return f({opened:!0,sourse:"natural"})}},"Open panel")),r.createElement("span",{hidden:!A},"File uuid: "),r.createElement("span",{hidden:!A},a&&a.uuid),r.createElement(s,{hidden:!L,value:c}))}
