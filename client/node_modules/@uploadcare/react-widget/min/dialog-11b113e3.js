import{c as e,b as n}from"./index-40ac8f68.js";import r,{useReducer as t,useRef as u,useEffect as l}from"react";import o from"uploadcare-widget/uploadcare.min";import{a as i,u as a}from"./use-deep-effect-f86d075a.js";import"react-fast-compare";import"@uploadcare/client-suspense";var c=function(n,r){return e(e({},n),r)},d={height:"500px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},s=function(e){var n=e.hidden,t=e.value,i=u(null),a=u(null);return l((function(){a.current=new o.Circle(i.current).renderer}),[]),l((function(){a.current.setValue(t)}),[t]),r.createElement("div",{hidden:n,ref:i})},f=function(e,r){var o=t(c,{opened:!0,file:null,progress:null}||{}),d=n(o,2),s=d[0],f=d[1],p=e.customTabs,m=e.tabsCss,A=e.locale,L=e.localePluralize,E=e.localeTranslations;i((function(){return A&&(window.UPLOADCARE_LOCALE=A),L&&(window.UPLOADCARE_LOCALE_PLURALIZE=L),E&&(window.UPLOADCARE_LOCALE_TRANSLATIONS=E),function(){A&&delete window.UPLOADCARE_LOCALE,L&&delete window.UPLOADCARE_LOCALE_PLURALIZE,E&&delete window.UPLOADCARE_LOCALE_TRANSLATIONS}}),[A,L,E]),a(p,r);var C=u(null),O=u(null);return l((function(){s.opened&&(r&&m&&"string"==typeof m&&(0===m.indexOf("https://")?r.tabsCss.addUrl(m):r.tabsCss.addStyle(m)),O.current&&O.current.reject(),O.current=r.openPanel(C.current,s.file?r.fileFrom("uploaded",s.file.uuid,e):null,e),f({file:null}),O.current.done((function(e){f({opened:!1}),e.progress((function(e){return f({progress:e.progress})})),e.done((function(e){return f({file:e})}))})))}),[r,e,f,s.opened]),l((function(){return function(){return O.current&&O.current.reject()}}),[]),[s,f,C]};export default function(e){var t=f(e,o),u=n(t,3),l=u[0],i=l.opened,a=l.file,c=l.progress,p=u[1],m=u[2],A=a&&!i,L=!a&&!i&&null!==c;return r.createElement("div",{id:e.id,style:d},r.createElement("div",{ref:m}),r.createElement("span",{hidden:!A},r.createElement("button",{className:"uploadcare--button uploadcare--button_primary",onClick:function(){return p({opened:!0,sourse:"natural"})}},"Open panel")),r.createElement("span",{hidden:!A},"File uuid: "),r.createElement("span",{hidden:!A},a&&a.uuid),r.createElement(s,{hidden:!L,value:c}))}
